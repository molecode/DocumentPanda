{% extends 'base.html' %}
{% load i18n %}
{% load l10n %}

{% block body %}
  <div class="w3-content">
  <p><div class="chartjs-wrapper"><canvas id="myChart" class="chartjs" width="undefined" height="100px"></canvas></div></p>

{% localize off %}
  <script>
    var ctx = document.getElementById("myChart").getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
        labels: [{% for year_report in year_reports %}{{ year_report.year }},{% endfor %}],
          datasets: [{
            label: "Reports",
            data: [{% for year_report in year_reports %}{{ year_report.brutto }},{% endfor %}],
            fill: false,
            borderColor: 'rgb(75, 192, 192)',
            lineTension: 0.1
          },
          {
            label: "Income",
            data: [{% for tax_report in tax_reports %}{% if tax_report %}{{ tax_report.income }},{% else %}0,{% endif %}{% endfor %}],
            fill: false,
            borderColor: 'rgb(255, 128, 0)',
            lineTension: 0.1
          },
          {
            label: "Profit",
            data: [{% for tax_report in tax_reports %}{% if tax_report %}{{ tax_report.get_profit }},{% else %}0,{% endif %}{% endfor %}],
            fill: false,
            borderColor: 'rgb(191, 62, 62)',
            lineTension: 0.1
          },
          {
            label: "Income tax",
            data: [{% for tax_report in tax_reports %}{% if tax_report %}{{ tax_report.income_tax }},{% else %}0,{% endif %}{% endfor %}],
            fill: false,
            borderColor: 'rgb(0, 102, 0)',
            lineTension: 0.1
          }]},
        options: {}
    });
  </script>
{% endlocalize %}
{% endblock body %}
